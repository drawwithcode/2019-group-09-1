<html>

<head>
  <title>VibeTuner</title>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <script src="/socket.io/socket.io.js"></script>
  <link rel="stylesheet" href="style.css">
  <script src="addons/ui.js"></script>
  <script src="addons/knob.js"></script>

  <!-- firebase libraries -->
  <script src="https://www.gstatic.com/firebasejs/7.8.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.8.0/firebase-analytics.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.8.0/firebase.js"></script>
</head>




<body>

  <div id="pageIntro" class="hidden">
    <h1 id="introTitle">VIBE.TUNER</h1>
    <div id="buttonsIntroCont">

      <button id="start" class="buttonIntro" onclick="changePage('Intro','1')" style="height: 10vh">START</button>
      <div id="buttonsIntroCont2">
        <button id="about" class="buttonIntro" style="margin-right: 2vh" onclick="changePage('Intro','About')">ABOUT</button>
        <button id="info" class="buttonIntro" style="margin-left: 2vh" onclick="changePage('Intro','Stats')">INFO</button>
      </div>
    </div>

  </div>

  <div id="pageAbout" class="hidden">
    About us bla bla bla the project bla bla bla
    <button onclick="changePage('About','Intro')"> </button>
  </div>

  <div id="pageStats" class="hidden">
    <button onclick="changePage('Stats','Intro');cleanPageStats();">Go back</button>
    <div class="statistics">
      <p>MOOD 0</p>
      <div id="counterMood0" class="counterCategory">
        0
      </div>

      <p>MOOD 1</p>
      <div id="counterMood1" class="counterCategory">
        0
      </div>

      <p>MOOD 2</p>
      <div id="counterMood2" class="counterCategory">
        0
      </div>

      <p>MOOD 3</p>
      <div id="counterMood3" class="counterCategory">
        0
      </div>

      <p>MOOD 4</p>
      <div id="counterMood4" class="counterCategory">
        0
      </div>
    </div>
  </div>



  <div id="page1" class="hidden">
    <h1 id="introTitle">VIBE.TUNER</h1>
    <div id="buttons1Cont">
      <button id="send" class="buttonPage1" onclick="changePage('1','2a')">SEND</button>
      <button id="receive" class="buttonPage1" onclick="changePage('1','2b'); retrieveSongs()">RECEIVE</button>
    </div>
  </div>



  <!--********************************************************************************************************************************************
  ***************************************************************************************************************************************************
  *************************** SECTION A *********************************************************************************************************
  ************************************************************************************************************************************************ -->

  <!--page research a song  -->
  <div id="page2a" class="hidden">

    <div id="page2aTitle"> SEND A SUGGESTION</div>

    <div style="display: flex ; flex-direction:column">

      <div id="searchBarHomeButton">
        <button id="buttonHomePage2a" onclick="changePage('2a','1');cleanPage2a();"> H </button>
        <input type="text" id="searchbar" onkeyup="search()" placeholder="Search a song...">
      </div>

      <div id="resultsContainerParent">
        <div id="placeholder2a" style=" visibility: hidden;"></div>

        <div id="resultsContainer" class="hidden">
          <div id="searchResults0" class="result" onclick="selectedResult(0)"></div>
          <div id="searchResults1" class="result" onclick="selectedResult(1)"></div>
          <div id="searchResults2" class="result" onclick="selectedResult(2)"></div>
          <div id="searchResults3" class="result" onclick="selectedResult(3)"></div>
          <div id="searchResults4" class="result" onclick="selectedResult(4)"></div>
          <div id="searchResults5" class="result" onclick="selectedResult(5)"></div>
        </div>
      </div>
    </div>
  </div>

  <!--Pagina di conferma per inserire la canzone -->
  <div id="page3a" class="hidden">
    <div id="page3aPopup" class="popUp1">
      <input type="button" class="goBack" value="&times;" onclick="changePage('3a','2a');cleanSRC('spotifyPreviewA');cleanPage2a();cleanButtons(0)">
      <div id="page3a_title">WOULD YOU LIKE TO SUGGEST THIS SONG?</div>

      <iframe id="spotifyPreviewA" class="spotifyPreview1" src="https://open.spotify.com/embed?uri=spotify:track:50rO1T1hHJD70uRjX1uthz" width="250" height="800" frameborder="0" allowtransparency="true"></iframe>

      <div id="page3a_subtitle">CHOOSE A MOOD FOR THIS SONG</div>

      <div id="moodButtonsContA">
        <div class="moodButtonsContA2"><button class="moodButton" onclick="setMoodA(0)"></button>
          <div class="moodButtonsLabels">ROMANTIC</div>
        </div>
        <div class="moodButtonsContA2"><button class="moodButton" onclick="setMoodA(1)"></button>
          <div class="moodButtonsLabels">INTENSE</div>
        </div>
        <div class="moodButtonsContA2"><button class="moodButton" onclick="setMoodA(2)"></button>
          <div class="moodButtonsLabels">CHEERFUL</div>
        </div>
        <div class="moodButtonsContA2"><button class="moodButton" onclick="setMoodA(3)"></button>
          <div class="moodButtonsLabels">NOSTALGIC</div>
        </div>
        <div class="moodButtonsContA2"><button class="moodButton" onclick="setMoodA(4)"></button>
          <div class="moodButtonsLabels">RELAXED</div>
        </div>
      </div>
      <button disabled id="sendSong" class="inactive buttonStyle1" onclick="sendSong();changePage('3a','4a');cleanSRC('spotifyPreviewA');cleanPage2a()">SEND</button>

    </div>
  </div>

  <div id="page4a" class="hidden">
    <div class="popUp1" id="popUpPage4a">
      <div class="title1" id="titlePage4a">SONG TRANSMITTED SUCCESFULLY</div>
      <button onclick="changePage('4a','1')" class="buttonStyle1 ">GO BACK</button>
    </div>
  </div>

  <!--********************************************************************************************************************************************
***************************************************************************************************************************************************
*************************** SECTION B *********************************************************************************************************
************************************************************************************************************************************************ -->

  <div id="page2b" class="">
    <div id="page2bCont">

      <div id="sketch2bSlider">
      </div>


      <div id="moodButtonsContB">
        <div class="moodButtonsContB2"><button class="moodButton" onclick="setMoodB(5)"></button>
          <div class="moodButtonsLabels">ROMANTIC</div>
        </div>
        <div class="moodButtonsContB2"><button class="moodButton" onclick="setMoodB(6)"></button>
          <div class="moodButtonsLabels">INTENSE</div>
        </div>
        <div class="moodButtonsContB2"><button class="moodButton" onclick="setMoodB(7)"></button>
          <div class="moodButtonsLabels">CHEERFUL</div>
        </div>
        <div class="moodButtonsContB2"><button class="moodButton" onclick="setMoodB(8)"></button>
          <div class="moodButtonsLabels">NOSTALGIC</div>
        </div>
        <div class="moodButtonsContB2"><button class="moodButton" onclick="setMoodB(9)"></button>
          <div class="moodButtonsLabels">RELAXED</div>
        </div>
      </div>

      <div id="sliderButton2b">
        <!--input range slider from knob.js library-->
        <input id='test' class="preset1" type="range" min="0" max="360" data-width="200" data-height="200" data-angleOffset="180" data-angleRange="360" step="3">
        <button id="receiveSong" onclick="receiveSong()">Choose this song</button>
      </div>
    </div>
  </div>


  <div id="page3b" class="hidden">
    <div class="popUp1">
      <input type="button" class="goBack" value="&times;">
      <div id="page3b_title" class="title1">SOMEONE SUGGESTED THIS SONG:</div>

        <iframe id="spotifyPreviewB" class="spotifyPreview1" src="https://open.spotify.com/embed?uri=spotify:track:50rO1T1hHJD70uRjX1uthz" width="250" height="800" frameborder="0" allowtransparency="true"></iframe>


      <button id="fromPage3bToPage1" onclick="changePage('3b','1');cleanButtons(5);cleanSRC('spotifyPreviewB')">No, go back</button>
    </div>
  </div>


</body>
<script src="addons/p5.min.js"></script>
<script src="sketch.js"></script>

</html>
